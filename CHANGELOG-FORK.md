# Changelog (Fork)

## [15.1.0-fork.1] - 2025-10-07

### 新增
- 客户端支持上游服务器分流配置，可导入 WireGuard `.conf` 并完整管理端点、密钥与隧道地址，同时在清空自定义规则时自动清理遗留 ipset。
- 引入自定义分流模式，提供代理/直连规则文本域、占位示例与使用说明，并同步更新多语言文案。
- 客户端卡片新增“一键复制配置”按钮，兼容现代与回退剪贴板方案。
- 默认自动分配客户端随机内网网段，提升无人值守安装体验。

### 优化
- 多轮迭代 `ClientRoutingManager` 与解析逻辑，集中管理分流规则并增强错误提示。
- 文本域解析统一换行与空行处理，改进配置输入体验。
- 面板、登录与管理页面最大宽度调至 `4xl`，界面信息展示更舒展。
- `resolveDomain` 逻辑拆分解析输出，提升可读性与可观测性。

### 运维
- Docker 与 Dockerfile.dev 预装 `ipset` 依赖，确保分流链路初始化能力。
- 数据库新增上游/分流隧道字段并重写迁移快照，自定义类型强化类型安全；增补共享 `wireguard-import` 与分流工具函数。
- 无人值守配置文档同步说明随机网段行为。
